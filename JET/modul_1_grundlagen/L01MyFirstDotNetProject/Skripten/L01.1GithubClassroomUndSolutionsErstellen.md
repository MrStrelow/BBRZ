# Umgang mit Visual Studio und .NET Projekten

## Erstellen eines Projektes
### Visual Studio (VS) mit der grafischen OberflÃ¤che (GUI)
Gehe Ã¼ber das MenÃ¼ auf ``Datei -> Neu -> Projekt (File -> New -> Project)``, wÃ¤hlen dann aus einer Liste von Vorlagen (z.B. "Konsolen-App"), geben Ihrem Projekt einen Namen und legen den Speicherort fest, bevor Sie auf "Erstellen" klicken. Verwende die neueste Version von .NET.
**Achtung!**: Verwende nie die Templates (Vorlagen) welche ``.Net Framework`` im Namen haben. Immer ohne.

### **Optional:** Mit der Console fÃ¼r jene die VS-Code verwenden wollen
1.  **Solution erstellen**: Den "Container" fÃ¼r Ihre Projekte anlegen (`.sln`-Datei).
2.  **Projekte erstellen**: Die einzelnen Projekte anlegen (`.csproj`-Dateien).
3.  **Projekte zur Solution hinzufÃ¼gen**: Die Projekte mit der Solution verknÃ¼pfen.

Hier ist eine detaillierte Schritt-fÃ¼r-Schritt-Anleitung, um eine Solution-Struktur wie in Visual Studio zu erstellen:

---

### Schritt 1: Ordnerstruktur vorbereiten (Gute Praxis)

Zuerst erstellen wir eine saubere Ordnerstruktur. Normalerweise legt man einen Hauptordner fÃ¼r die Solution an und darin einen `src`-Ordner (Source) fÃ¼r die Projekte.

```bash
# Hauptordner erstellen und dorthin wechseln
mkdir MeineAnwendung
cd MeineAnwendung

# Einen Ordner fÃ¼r den Quellcode erstellen
mkdir src
```

### Schritt 2: Die Solution-Datei erstellen

Jetzt erstellen wir die leere Solution-Datei im Hauptordner.

```bash
# Erstellt eine .sln-Datei mit dem Namen des aktuellen Ordners (MeineAnwendung.sln)
dotnet new sln
```
* Dieser Befehl entspricht in der GUI **Datei -> Neu -> Projekt** und der Auswahl von **Leere Projektmappe** (Blank Solution).

### Schritt 3: Die einzelnen Projekte erstellen

Erstellen wir nun zwei Projekte innerhalb des `src`-Ordners: eine Konsolenanwendung (das ausfÃ¼hrbare Programm) und eine Klassenbibliothek (fÃ¼r wiederverwendbaren Code).

```bash
# 1. Eine Konsolenanwendung erstellen
dotnet new console -n MeineKonsoleApp -o src/MeineKonsoleApp

# 2. Eine Klassenbibliothek erstellen
dotnet new classlib -n MeineLogikLib -o src/MeineLogikLib
```
* `dotnet new console`/`classlib`: WÃ¤hlt die Projektvorlage.
* `-n <Name>`: Gibt dem Projekt einen Namen.
* `-o <Pfad>`: Gibt an, in welchem Ordner (`output`) das Projekt erstellt werden soll.
* Dies entspricht in der GUI dem Rechtsklick auf die Solution und **HinzufÃ¼gen -> Neues Projekt...**.

### Schritt 4: Projekte zur Solution hinzufÃ¼gen

Im Moment wissen die Solution und die Projekte nichts voneinander. Wir mÃ¼ssen die Projekte nun zur `.sln`-Datei hinzufÃ¼gen. Stellen Sie sicher, dass Sie sich immer noch im Hauptordner (`MeineAnwendung`) befinden, wo die `.sln`-Datei liegt.

```bash
# FÃ¼ge das Konsolenprojekt zur Solution hinzu
dotnet sln add src/MeineKonsoleApp/MeineKonsoleApp.csproj

# FÃ¼ge die Klassenbibliothek zur Solution hinzu
dotnet sln add src/MeineLogikLib/MeineLogikLib.csproj
```
* Der Befehl `dotnet sln add` nimmt den Pfad zur `.csproj`-Datei des Projekts entgegen und fÃ¼gt den entsprechenden Eintrag in der `.sln`-Datei hinzu.
* Dies entspricht in der GUI dem Rechtsklick auf die Solution und **HinzufÃ¼gen -> Vorhandenes Projekt...**.

### Zusammenfassung & Ergebnis

Nach diesen Befehlen haben Sie die folgende Ordner- und Dateistruktur, die exakt der von Visual Studio erstellten entspricht:

```
MeineAnwendung/
â”œâ”€â”€ MeineAnwendung.sln
â””â”€â”€ src/
    â”œâ”€â”€ MeineKonsoleApp/
    â”‚   â”œâ”€â”€ MeineKonsoleApp.csproj
    â”‚   â””â”€â”€ Program.cs
    â””â”€â”€ MeineLogikLib/
        â”œâ”€â”€ MeineLogikLib.csproj
        â””â”€â”€ Class1.cs
```

### Automatisierung als Skript
Hier noch ein kleines ``Shellscript`` (.sh) welches die Befehle zusammenfasst.

```bash
#!/bin/bash

# Stoppt das Skript sofort, wenn ein Befehl fehlschlÃ¤gt.
set -e

# --- Validierung der Eingabe ---
# ÃœberprÃ¼fen, ob mindestens zwei Argumente Ã¼bergeben wurden (1 fÃ¼r die Solution, mind. 1 fÃ¼r ein Projekt).
if [ "$#" -lt 2 ]; then
  echo "Fehler: Unzureichende Argumente."
  echo "Verwendung: $0 <SolutionName> <ProjectName1> [ProjectName2] ..."
  echo "Beispiel:  $0 MeineAnwendung ApiService DatenModelle"
  exit 1
fi

# --- Zuweisung der Argumente ---
# Das erste Argument ist der Name der Solution.
SOLUTION_NAME=$1
# Die restlichen Argumente werden als Projektnamen behandelt.
shift # Entfernt das erste Argument (SolutionName) aus der Liste.
PROJECT_NAMES=("$@") # Speichert die restlichen Argumente in einem Array.

# --- Skript-Logik ---
echo "ðŸš€ Erstelle Solution '$SOLUTION_NAME'..."

# 1. Hauptverzeichnis fÃ¼r die Solution erstellen und dorthin wechseln.
mkdir -p "$SOLUTION_NAME/src"
cd "$SOLUTION_NAME"

# 2. Die .sln-Datei erstellen.
echo "-> Erstelle Solution-Datei..."
dotnet new sln -n "$SOLUTION_NAME"

# 3. Schleife durch alle Projektnamen, um sie zu erstellen und hinzuzufÃ¼gen.
for project_name in "${PROJECT_NAMES[@]}"; do
  echo "-> Erstelle Projekt '$project_name' und fÃ¼ge es zur Solution hinzu..."
  
  # Projekt im 'src'-Unterverzeichnis erstellen.
  # HINWEIS: 'console' kann durch andere Vorlagen wie 'classlib', 'webapp', 'worker' etc. ersetzt werden.
  dotnet new console -n "$project_name" -o "src/$project_name"
  
  # Das neu erstellte Projekt zur Solution-Datei hinzufÃ¼gen.
  dotnet sln "$SOLUTION_NAME.sln" add "src/$project_name/$project_name.csproj"
done

# --- Abschluss ---
echo ""
echo "âœ… Fertig! Solution '$SOLUTION_NAME' wurde mit ${#PROJECT_NAMES[@]} Projekt(en) erfolgreich erstellt."
echo "Die Verzeichnisstruktur sieht wie folgt aus:"

# Zeigt die erstellte Struktur an. 'tree' ist Ã¼bersichtlicher, falls installiert.
if command -v tree &> /dev/null
then
  tree .
else
  ls -R .
fi
```

Wir rufen diese mittels folgenden Befehlen auf.
```
chmod +x create_solution.sh
./create_solution.sh MeineFirma HauptAnwendung Logikbibliothek TestProjekt
```

Sie kÃ¶nnen nun die Datei `MeineAnwendung.sln` mit Visual Studio Ã¶ffnen, und die IDE wird die Solution inklusive beider Projekte korrekt laden, als hÃ¤tten Sie alles von Anfang an in der GUI erstellt. Dieser konsolenbasierte Ansatz ist besonders nÃ¼tzlich fÃ¼r Automatisierung, Skripte und CI/CD-Pipelines.

---

## Ã–ffnen eines bestehdenden Projekts
Ein Visual Studio Projekt wird Ã¼ber die Solution-Datei (`.sln`) geÃ¶ffnet. Machen Sie einfach einen Doppelklick auf die `.sln`-Datei, um die gesamte Solution in Visual Studio zu laden.

## Aufbau einer Solution (Projektmappe)
Eine Solution ist ein Container fÃ¼r ein oder mehrere Projekte. Wir verwenden eine Solution, um thematisch zusammengehÃ¶rige Projekte zu bÃ¼ndeln.

**Beispiel:**
Die Solution `Modul1-LiveCoding` kÃ¶nnte mehrere Projekte enthalten, die sich mit den Themen aus Modul 1 beschÃ¤ftigen.

**Wichtig:** Innerhalb einer Solution kann viele Projekte geben. Wir fÃ¼gen diese mit einem Rechtsklick auf die Solution und dann ``add -> new Project`` hinzu. Jedes Projekt kann nur **einen** Einstiegspunkt haben. Das bedeutet, nur ein Projekt kann eine `Main`-Methode (oder ein Top-Level-Statement) enthalten, das beim Starten der Anwendung ausgefÃ¼hrt wird.

Hier ist ein Beispiel fÃ¼r ein Top-Level-Statement:
```csharp
uint[] zahlen = [28, 26, 6, 4, 2];
uint platzhalter = 10; //uint ist ein unsigned int, bedeutet es hab nur positive zahlen. 

for (int j = 0; j < zahlen.Length - 1; j++)
{
    Console.WriteLine($"{j + 1} Durchlauf");    // Das $ kennzeichnet einen formatted String. Dieser erlaubt eine string-interpolation. Wir kÃ¶nnen dadurch innerhalb der geschwungenen Klammern {} C# code angeben.
}
```

Hier ist ein Beispiel fÃ¼r eine Klasse mit Main-Methode:
```csharp
// Das Ffile heiÃŸt z.B. Programm.cs - hier muss die Klasse nicht den gleichen Namen haben wie das File. 
public class Zahlen {
    public static void Main() { // Achtung! Methoden werden in C# groÃŸ geschrieben! Zudem kann, muss aber nicht ein string[] args Ã¼bergeben werden. string wird hier klein geschrieben und ist die AbkÃ¼rzung von System.String. Gleich wie int vs. System.Int32. Ansonsten sind Klassen groÃŸ geschreiben z.b. List<...>.
        uint[] zahlen = [28, 26, 6, 4, 2];
        uint platzhalter = 10; //uint ist ein unsigned int, bedeutet es hab nur positive zahlen. 

        for (int j = 0; j < zahlen.Length - 1; j++)
        {
            Console.WriteLine($"{j + 1} Durchlauf");    // Das $ kennzeichnet einen formatted String. Dieser erlaubt eine string-interpolation. Wir kÃ¶nnen dadurch innerhalb der geschwungenen Klammern {} C# code angeben.
        }
    }
}
```

## NÃ¼tzliche Konsolenbefehle

Die .NET CLI (Command Line Interface) bietet Befehle zum Verwalten von .NET-Projekten. Hier sind einige der wichtigsten:

* **Bauen (Build):**
    * Befehl: `dotnet build`
    * Dieser Befehl kompiliert das Projekt im aktuellen Verzeichnis.
    * Grafisch in VS: **Build -> Build Solution** (Erstellen -> Projektmappe erstellen)

* **Bereinigen (Clean):**
    * Befehl: `dotnet clean`
    * Dieser Befehl lÃ¶scht die Ausgabe des letzten Builds.
    * Grafisch in VS: **Build -> Clean Solution** (Erstellen -> Projektmappe bereinigen)

* **AusfÃ¼hren (Run):**
    * Befehl: `dotnet run`
    * Dieser Befehl baut das Projekt und fÃ¼hrt es aus.
    * Grafisch in VS: **Debug -> Start Debugging** (Debuggen -> Debugging starten) oder **Debug -> Start Without Debugging** (Debuggen -> Starten ohne Debuggen)

## Tipps

* **Ein Projekt wird nicht erkannt:**
    * Ã–ffnen Sie die `.sln`-Datei mit einem Texteditor wie Visual Studio Code (nicht Visual Studio!).
    * ÃœberprÃ¼fen Sie die Dateipfade zu den Projekten (`.csproj`-Dateien) und stellen Sie sicher, dass sie korrekt sind.
    * Beispiel einer `.sln`-Datei:
    ```
    Microsoft Visual Studio Solution File, Format Version 12.00
    # Visual Studio Version 17
    VisualStudioVersion = 17.0.31903.59
    MinimumVisualStudioVersion = 10.0.40219.1
    Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "MeinProjekt", "MeinProjekt\MeinProjekt.csproj", "{DE9A4240-A51A-4AF4-B849-B4886D6B6082}"
    EndProject
    Global
        ...
    EndGlobal
    ```

* **Git verwenden:**
    * Verwenden Sie die **Developer PowerShell** in Visual Studio fÃ¼r Git-Befehle. Diese ist bereits mit den notwendigen Werkzeugen konfiguriert.
    * Sie finden diese unter **View -> Terminal** (Ansicht -> Terminal)

* **Solution Explorer (Projektmappen-Explorer):**
    * Der **Solution Explorer** (Projektmappen-Explorer) ist standardmÃ¤ÃŸig auf der rechten Seite von Visual Studio zu finden.
    * Er zeigt die hierarchische Struktur Ihrer Solution und der darin enthaltenen Projekte an.

# Abgaben auf GitHub Classroom

Die Abgabe der Aufgabe erfolgt Ã¼ber GitHub Classroom. Der Prozess lÃ¤uft folgendermaÃŸen ab:

1.  **Aufgabe annehmen:**
    * Klicken Sie auf den bereitgestellten Link: z.B. [https://classroom.github.com/a/mmR_Rtq3](https://classroom.github.com/a/mmR_Rtq3)
    * Sie werden aufgefordert, die Aufgabe anzunehmen. Dadurch wird ein privates Repository fÃ¼r Sie auf GitHub erstellt, das eine Kopie der Aufgabenstellung enthÃ¤lt.

2.  **Repository klonen:**
    * Nachdem das Repository erstellt wurde, klonen Sie es auf Ihren lokalen Computer. Sie finden die URL zum Klonen auf der Seite Ihres Repositories auf GitHub.
    * Verwenden Sie den Befehl `git clone <repository_url>` in der Developer PowerShell oder einem anderen Terminal.

3.  **Aufgabe bearbeiten:**
    * Ã–ffne das geklonte Projekt in Visual Studio.
    * Erstelle dort eine Soltion mit einem Projekt.
    * Beginn dort die Aufgabe zu lÃ¶sen.

4.  **Ã„nderungen committen und pushen:**
    * Wenn Sie mit Ihrer LÃ¶sung zufrieden sind, committen Sie Ihre Ã„nderungen und pushen Sie sie zu Ihrem GitHub-Repository.
    * Verwenden Sie die folgenden Git-Befehle:
        ```bash
        git add .
        git commit -m "Aufgabe 1: Erster LÃ¶sungs Versuch."
        git push
        ```

5.  **Automatischer Test:**
    * Sobald Sie Ihre Ã„nderungen gepusht haben, wird ein automatisierter Test in Ihrem GitHub-Repository ausgefÃ¼hrt.
    * Sie kÃ¶nnen den Fortschritt und das Ergebnis des Tests im "Actions"-Tab Ihres Repositories verfolgen.
    * Der Test Ã¼berprÃ¼ft, ob Ihre LÃ¶sung die in der Aufgabenstellung definierten Kriterien erfÃ¼llt. Wenn der Test fehlschlÃ¤gt, kÃ¶nnen Sie weitere Ã„nderungen vornehmen, committen und pushen, um den Test erneut auszufÃ¼hren.